<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream-Link Result Portal</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e1e2e">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #0056b3; 
            --secondary-color: #f0f4f8; 
            --accent-color: #ff9800; 
            --text-dark: #333;
            --border-radius: 8px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--secondary-color);
            margin: 0;
            padding: 0;
            color: var(--text-dark);
        }

        /* Header Style */
        header {
            background: linear-gradient(135deg, #0056b3, #004494);
            color: white;
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
            letter-spacing: 1px;
        }

        /* Container */
        .container {
            max-width: 600px; /* Compact width */
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
            color: #555;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius);
            font-size: 1rem;
            box-sizing: border-box;
            transition: 0.3s;
        }

        select:focus, input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        button.search-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        button.search-btn:active {
            transform: scale(0.98);
        }

        /* Result Card Design */
        #result-area {
            display: none; /* Hidden by default */
            margin-top: 25px;
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .result-header {
            background-color: #e3f2fd;
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #bbdefb;
        }

        .result-header h2 {
            margin: 0;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .info-grid {
            padding: 15px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .label {
            color: #777;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .value {
            font-weight: 600;
            color: #222;
            text-align: right;
        }

        .highlight {
            color: var(--primary-color);
        }

        /* Status Messages */
        #status-msg {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
        }
        .error { color: red; }
        .loading { color: orange; }

        /* Print Button */
        .print-btn-container {
            text-align: center;
            margin-top: 20px;
            display: none;
        }
        
        .print-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.8rem;
            color: #888;
        }

        /* Print Specific CSS */
        @media print {
            header, .form-group, .search-btn, footer, .print-btn-container {
                display: none !important;
            }
            body { background-color: white; }
            .container { 
                box-shadow: none; 
                border: 1px solid #ccc;
                max-width: 100%;
                margin: 0;
            }
            #result-area { display: block !important; border: 2px solid #000; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Dream-Link</h1>
        <div style="font-size: 0.8rem; opacity: 0.9;">Official Result Portal</div>
    </header>

    <div class="container">
        
        <div class="no-print">
            <div class="form-group">
                <label>Select Exam Category</label>
                <select id="examType">
                    <option value="NTSP">NTSP (Non-TSP Area)</option>
                    <option value="TSP">TSP Area</option>
                </select>
            </div>

            <div class="form-group">
                <label>Enter Roll Number</label>
                <input type="number" id="rollInput" placeholder="Ex: 101876">
            </div>

            <button class="search-btn" onclick="searchResult()">Search Result</button>
            <div id="status-msg"></div>
        </div>

        <div id="result-area">
            <div class="result-header">
                <h2>CANDIDATE SCORE CARD</h2>
                <div style="font-size: 0.85rem; margin-top:5px;">Result Verification</div>
            </div>
            
            <div class="info-grid">
                <div class="info-row"><span class="label">Candidate Name</span> <span class="value" id="res_name">-</span></div>
                <div class="info-row"><span class="label">Father's Name</span> <span class="value" id="res_father">-</span></div>
                <div class="info-row"><span class="label">Mother's Name</span> <span class="value" id="res_mother">-</span></div>
                <div class="info-row"><span class="label">Roll Number</span> <span class="value" id="res_roll">-</span></div>
                
                <div class="info-row"><span class="label">Raw Marks</span> <span class="value" id="res_raw">-</span></div>
                <div class="info-row"><span class="label">Final Marks</span> <span class="value highlight" id="res_final">-</span></div>
                
                <hr style="border: 0; border-top: 1px solid #eee; margin: 10px 0;">

                <div class="info-row"><span class="label">Merit Rank</span> <span class="value highlight" style="font-size: 1.1rem;" id="res_merit">-</span></div>
                <div class="info-row"><span class="label">Category</span> <span class="value" id="res_cat">-</span></div>
                <div class="info-row"><span class="label">Gender</span> <span class="value" id="res_gender">-</span></div>
                <div class="info-row"><span class="label">Shift</span> <span class="value" id="res_shift">-</span></div>
                <div class="info-row"><span class="label">Special Category</span> <span class="value" id="res_subcat">-</span></div>
            </div>
        </div>

        <div class="print-btn-container" id="printBtnDiv">
            <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print Result</button>
        </div>

    </div>

    <footer>
        &copy; 2026 Dream-Link Portal. All rights reserved.
    </footer>
    <script src="data_roll_ntsp_part1.js"></script>
    <script src="data_roll_ntsp_part2.js"></script>

    <script src="data_ntsp_merit_part1.js"></script>
    <script src="data_merit_part2.js"></script>
    <script>
        function searchResult() {
            // 1. Inputs ‡§≤‡•á‡§®‡§æ
            const type = document.getElementById('examType').value;
            const roll = document.getElementById('rollInput').value.trim();
            const resultArea = document.getElementById('result-area');
            const printDiv = document.getElementById('printBtnDiv');
            const status = document.getElementById('status-msg');

            // Reset UI
            status.innerHTML = "";
            status.className = "";
            resultArea.style.display = "none";
            printDiv.style.display = "none";

            if (!roll) {
                status.innerHTML = "Please enter a Roll Number.";
                status.className = "error";
                return;
            }

            status.innerHTML = "Searching records...";
            status.className = "loading";

            // 2. Data Selection Logic (NTSP vs TSP)
            let rollDB, meritDB;

            if (type === "NTSP") {
                rollDB = window.NTSP_ROLL_DATA || {};
                meritDB = window.NTSP_MERIT_DATA || {};
            } else {
                rollDB = window.NTSP_ROLL_DATA || {}; // ‡§Ö‡§≠‡•Ä TSP ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä ‡§Ø‡§π‡•Ä demo data use ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç
                meritDB = window.NTSP_MERIT_DATA || {}; 
                // ‡§Ö‡§∏‡§≤‡•Ä ‡§Æ‡•á‡§Ç: rollDB = window.TSP_ROLL_DATA;
            }

            // 3. Search Logic
            setTimeout(() => { // Timeout ‡§∏‡§ø‡§∞‡•ç‡•û ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§´‡•Ä‡§≤ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è
                const candidate = rollDB[roll];

                if (candidate) {
                    // Step A: Roll Data ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ
                    const meritRank = candidate.Merit;
                    
                    // Step B: Merit Data ‡§¢‡•Ç‡§Å‡§¢‡§®‡§æ (Cross Reference)
                    const extraDetails = meritDB[meritRank] || { 
                        "Gender": "N/A", "Category": "N/A", "Shift": "N/A", "SubCat": "" 
                    };

                    // Step C: Display Data populate ‡§ï‡§∞‡§®‡§æ
                    document.getElementById('res_name').innerText = candidate.Name;
                    document.getElementById('res_father').innerText = candidate.Father;
                    document.getElementById('res_mother').innerText = candidate.Mother;
                    document.getElementById('res_roll').innerText = roll;
                    document.getElementById('res_raw').innerText = candidate.RawMark;
                    document.getElementById('res_final').innerText = candidate.FinalMark;
                    
                    document.getElementById('res_merit').innerText = meritRank;
                    document.getElementById('res_cat').innerText = extraDetails.Category;
                    document.getElementById('res_gender').innerText = extraDetails.Gender;
                    document.getElementById('res_shift').innerText = "Shift " + extraDetails.Shift;
                    document.getElementById('res_subcat').innerText = extraDetails.SubCat || "None";

                    // Show Result
                    status.innerHTML = "";
                    resultArea.style.display = "block";
                    printDiv.style.display = "block";
                } else {
                    status.innerHTML = "Roll Number not found in " + type + " list.";
                    status.className = "error";
                }
            }, 300);
        }
    </script>
  <script>
  if ('serviceWorker' in navigator) navigator.serviceWorker.register('service-worker.js');
</script>
</body>
</html>